# Морской бой (LAN, браузер)

Небольшое веб‑приложение на Python (Flask + Socket.IO) для игры в "Морской бой" по локальной Wi‑Fi сети. Два игрока заходят в браузере на адрес сервера, создают/вводят код комнаты и играют в реальном времени.

## Возможности
- Создание комнаты с 5‑значным кодом, подключение по коду со второго устройства.
- Случайная расстановка кораблей по классическим правилам (4‑палубный x1, 3‑палубный x2, 2‑палубный x3, 1‑палубный x4), без касаний по краям и диагоналям.
- Пошаговая стрельба, мгновенная синхронизация через WebSocket (Socket.IO).
- Поддержка Windows, доступ по LAN (телефон/ноутбук в той же сети).

## Требования
- Python 3.10+
- Доступ в интернет для установки зависимостей (один раз).

## Установка (Windows, PowerShell)
1. Перейдите в папку проекта `sea_fight`.
2. Создайте и активируйте виртуальное окружение:
   ```powershell
   python -m venv .venv
   .\.venv\Scripts\Activate.ps1
   ```
3. Обновите `pip` и установите зависимости:
   ```powershell
   python -m pip install --upgrade pip
   pip install -r requirements.txt
   ```

## Запуск
```powershell
python app.py
```
По умолчанию сервер запустится на `http://0.0.0.0:5000` (то есть доступен со всех интерфейсов).

Откройте на самом сервере: `http://localhost:5000`

На втором устройстве (в той же Wi‑Fi сети) откройте браузер и введите адрес:
```
http://IP_АДРЕС_СЕРВЕРА:5000
```
Где `IP_АДРЕС_СЕРВЕРА` — локальный адрес компьютера с сервером. Узнать его можно так:
```powershell
ipconfig
```
Ищите IPv4 для адаптера вашей сети (обычно что‑то вроде `192.168.0.23`).

При первом запуске Windows может спросить доступ в брандмауэре — разрешите для частных сетей.

## Как играть
1. Игрок A нажимает "Создать" и получает код комнаты.
2. Игрок B вводит этот код на своей странице и присоединяется.
3. Когда оба игрока в комнате, игра стартует. Ваше поле слева (корабли помечены), поле соперника справа (корабли скрыты).
4. Стреляйте, кликая по клеткам поля соперника. Попадание даёт право хода ещё раз. Промах — ход переходит сопернику.
5. Побеждает тот, кто первым потопит все корабли соперника.

## Структура проекта
- `app.py` — Flask + Socket.IO сервер, комнаты, ходы, события.
- `game.py` — логика генерации доски и расстановки кораблей.
- `templates/index.html` — страница игры.
- `static/styles.css` — стиль.
- `static/client.js` — фронтенд‑логика и связь по WebSocket.
- `requirements.txt` — зависимости.

## Примечания
- Приложение хранит состояние в памяти процесса. Для лёгкой LAN‑игры этого достаточно. Перезапуск сервера очистит комнаты.
- Если при установке `eventlet` возникнут проблемы, можно удалить его из `requirements.txt` и в `app.py` заменить инициализацию SocketIO на:
  ```python
  socketio = SocketIO(app, cors_allowed_origins="*")  # авто‑режим или threading
  ```
  и снова установить зависимости. Производительности для 2 игроков достаточно.
